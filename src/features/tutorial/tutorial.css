/* tutorial.css */

@import url(../../../src/shared/components.css);
@import url(../../../src/shared/stylesheet.css);

:root {
    --rt-color-primary: #FFD700;
    --rt-color-bg: #0f0f10;
    --rt-color-text: #ffffff;

    --rt-radius-lg: 12px;
    --rt-radius-md: 10px;

    --rt-backdrop-opacity: 0.45;
    --rt-backdrop-blur: 2px;

    --rt-tooltip-max-width: 40%;
    --rt-tooltip-font-size: 1.5em;

    --rt-transition-fast: 0.25s ease;

    /* NEW: spotlight default size + position */
    --spot-width: 320px;
    --spot-height: 240px;
    --spot-left: 50%;
    --spot-top: 50%;
}

/* Highlight ring */
.rt-tour-highlight {
    position: absolute;
    outline: 3px solid var(--rt-color-primary);
    border-radius: var(--rt-radius-md);
    box-shadow: 0 0 15px 3px rgba(255, 215, 0, 0.45);
    z-index: 9999;
    pointer-events: none;
}

/* Tooltip panel */
.rt-tour-tooltip {
    position: absolute;
    max-width: var(--rt-tooltip-max-width);
    background: var(--rt-color-bg);
    color: var(--rt-color-text);
    border-radius: var(--rt-radius-lg);
    padding: 14px 16px;
    font-size: var(--rt-tooltip-font-size);
    z-index: 10000;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
    /* modern feel: fade + scale */
    opacity: 0;
    transform: scale(0.96);
    transition:
        opacity var(--rt-transition-fast),
        transform var(--rt-transition-fast);
}

/* visible state */
.rt-tour-tooltip--visible {
    opacity: 1;
    transform: scale(1);
}

.rt-tour-text {
    font-family: 'Futura LtCn BT';
    margin: 1em;
}

/* Buttons row */
.rt-tour-actions {
    display: flex;
    gap: 8px;
    width: 100%;
    justify-content: space-evenly;
}

.rt-tour-btn {
    cursor: pointer;
    border: none;
    border-radius: 10px;
    padding: 8px 12px;
    font-weight: 600;
    transition: box-shadow 0.6s ease, transform 0.3s ease;
}

.rt-tour-btn-primary {
    background: #E90A01;
    color: #fff;
}

.rt-tour-btn-ghost {
    color: #fff;
    outline: 1px solid #666;
    background-color: #0f0f10;
}

@media (max-width: 640px) {
    .rt-tour-tooltip {
        max-width: 92vw;
    }
}

/* Disable page scrolling while tutorial is active */
.rt-scroll-lock {
    overflow: hidden;
    height: 100vh;
}


/* -------------------------------------------------
   RECTANGULAR SPOTLIGHT WINDOW (correct method)
---------------------------------------------------*/
/* -------------------------------------------------
   RECTANGULAR SPOTLIGHT WINDOW (cut-out)
---------------------------------------------------*/
.rt-tour-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    z-index: 9996;
    pointer-events: auto;
    transition: opacity 0.4s ease;

    /* ---------------------------------------------
   3-MASK SPOTLIGHT (ASIDE-SAFE)
   Standard + WebKit versions
---------------------------------------------- */

    mask-image:
        linear-gradient(#000 0 0),
        /* TOP MASK */
        linear-gradient(#000 0 0),
        /* RIGHT MASK */
        linear-gradient(#000 0 0);
    /* BOTTOM MASK */

    -webkit-mask-image:
        linear-gradient(#000 0 0),
        linear-gradient(#000 0 0),
        linear-gradient(#000 0 0);

    /* ---------- MASK SIZES ---------- */

    mask-size:
        /* TOP: width = aside, height = above spotlight */
        var(--aside-width) var(--spot-top),

        /* RIGHT: width = page - aside width, height = full page */
        calc(100% - var(--aside-width)) 100%,

        /* BOTTOM: width = aside, height = below spotlight */
        var(--aside-width) calc(100% - (var(--spot-top) + var(--spot-height)));

    -webkit-mask-size:
        var(--aside-width) var(--spot-top),
        calc(100% - var(--aside-width)) 100%,
        var(--aside-width) calc(100% - (var(--spot-top) + var(--spot-height)));

    /* ---------- MASK POSITIONS ---------- */

    mask-position:
        /* TOP MASK → upper-left corner */
        0 0,

        /* RIGHT MASK → begins to the right of the aside */
        var(--aside-width) 0,

        /* BOTTOM MASK → begins under spotlight */
        0 calc(var(--spot-top) + var(--spot-height));

    -webkit-mask-position:
        0 0,
        var(--aside-width) 0,
        0 calc(var(--spot-top) + var(--spot-height));

    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;

    /* Spotlight cut-out mode */
    mask-composite: exclude;
    -webkit-mask-composite: xor;

}




/* Parent container wrapping backdrop + ring */
.rt-tour-container {
    position: fixed;
    inset: 0;
    z-index: 9997;
    pointer-events: none;
    transition: all 0.4s ease;
}

/* Disable all page interaction */
/* Disable everything EXCEPT the tooltip + highlighted aside link */
.rt-disable-all *:not(.rt-tour-tooltip):not(.rt-tour-tooltip *):not(.rt-spot-active) {
    pointer-events: none !important;
}


/* Re-enable on the current highlighted aside link */
.rt-spot-active {
    pointer-events: auto !important;
}

.rt-disabled-shake {
    animation: shake 0.3s ease;
}

@keyframes shake {
    0% {
        transform: translateX(0);
    }

    20% {
        transform: translateX(-4px);
    }

    40% {
        transform: translateX(4px);
    }

    60% {
        transform: translateX(-4px);
    }

    80% {
        transform: translateX(4px);
    }

    100% {
        transform: translateX(0);
    }
}